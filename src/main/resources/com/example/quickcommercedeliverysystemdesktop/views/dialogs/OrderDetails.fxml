<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.quickcommercedeliverysystemdesktop.controllers.dialogs.OrderDetailsController"
            fitToWidth="true" style="-fx-background-color: white;">

    <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: white;">

        <!-- Header Section -->
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 15; -fx-background-color: #f8f9fa; -fx-background-radius: 8;">
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label fx:id="orderIdLabel" text="Order #0" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                <Label fx:id="orderDateLabel" text="Created on: " style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
            </VBox>
            <Label fx:id="statusBadge" text="PENDING"
                   style="-fx-background-color: #ffc107; -fx-text-fill: white; -fx-padding: 8 16;
                          -fx-background-radius: 20; -fx-font-weight: bold; -fx-font-size: 12px;"/>
        </HBox>

        <!-- Product Information Card -->
        <VBox spacing="12" style="-fx-padding: 20; -fx-background-color: #f8f9fa; -fx-background-radius: 8;">
            <Label text="ðŸ“¦ Product Information" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

            <HBox spacing="20">
                <!-- Product Photo -->
                <VBox alignment="CENTER" spacing="8">
                    <ImageView fx:id="productImageView" fitWidth="150" fitHeight="150" preserveRatio="true"
                               style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 8, 0, 0, 2);"/>
                    <Label fx:id="photoLabel" text="No photo" style="-fx-font-size: 10px; -fx-text-fill: #999;"/>
                </VBox>

                <!-- Product Details -->
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <HBox spacing="8">
                        <Label text="Product:" style="-fx-font-weight: bold; -fx-min-width: 80px;"/>
                        <Label fx:id="productNameLabel" text="" wrapText="true"/>
                    </HBox>
                    <VBox spacing="5">
                        <Label text="Description:" style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="descriptionArea" editable="false" wrapText="true"
                                  prefRowCount="4" style="-fx-background-color: white;"/>
                    </VBox>
                </VBox>
            </HBox>
        </VBox>

        <!-- Delivery Details Card -->
        <VBox spacing="12" style="-fx-padding: 20; -fx-background-color: #f8f9fa; -fx-background-radius: 8;">
            <Label text="ðŸšš Delivery Details" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

            <GridPane hgap="15" vgap="10">
                <columnConstraints>
                    <ColumnConstraints minWidth="120" prefWidth="120"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <Label text="ðŸ“ Location:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="deliveryLocationLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" wrapText="true"/>

                <Label text="â° Time Range:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="timeRangeLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <Label text="ðŸ’° Delivery Fee:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="deliveryFeeLabel" GridPane.rowIndex="2" GridPane.columnIndex="1"
                       style="-fx-font-size: 18px; -fx-text-fill: #27ae60; -fx-font-weight: bold;"/>

                <Label fx:id="notesLabelTitle" text="ðŸ“ Special Notes:" GridPane.rowIndex="3" GridPane.columnIndex="0"
                       style="-fx-font-weight: bold;" visible="false" managed="false"/>
                <TextArea fx:id="notesArea" GridPane.rowIndex="3" GridPane.columnIndex="1"
                          editable="false" wrapText="true" prefRowCount="2"
                          style="-fx-background-color: white;" visible="false" managed="false"/>
            </GridPane>
        </VBox>

        <!-- Customer Information Card (For Delivery Partners) -->
        <VBox fx:id="customerInfoCard" spacing="12"
              style="-fx-padding: 20; -fx-background-color: #e3f2fd; -fx-background-radius: 8;"
              visible="false" managed="false">
            <Label text="ðŸ‘¤ Customer Information" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

            <GridPane hgap="15" vgap="8">
                <columnConstraints>
                    <ColumnConstraints minWidth="100" prefWidth="100"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="customerNameLabel" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <Label text="Phone:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="customerPhoneLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
            </GridPane>
        </VBox>

        <!-- Delivery Partner Information Card (For Customers) -->
        <VBox fx:id="partnerInfoCard" spacing="12"
              style="-fx-padding: 20; -fx-background-color: #e8f5e9; -fx-background-radius: 8;"
              visible="false" managed="false">
            <Label text="ðŸš´ Delivery Partner Information" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

            <GridPane hgap="15" vgap="8">
                <columnConstraints>
                    <ColumnConstraints minWidth="100" prefWidth="100"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>

                <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="partnerNameLabel" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <Label text="Phone:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="partnerPhoneLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <Label text="Status:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                <Label fx:id="deliveryStatusLabel" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
            </GridPane>
        </VBox>

        <!-- Status Timeline -->
        <VBox spacing="12" style="-fx-padding: 20; -fx-background-color: #f8f9fa; -fx-background-radius: 8;">
            <Label text="ðŸ“‹ Order Timeline" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
            <VBox fx:id="timelineContainer" spacing="8"/>
        </VBox>

        <!-- Action Buttons -->
        <HBox spacing="12" alignment="CENTER">
            <!-- Customer Actions -->
            <Button fx:id="cancelOrderBtn" text="Cancel Order" onAction="#handleCancelOrder"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="contactPartnerBtn" text="Contact Partner" onAction="#handleContactPartner"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="rateDeliveryBtn" text="Rate &amp; Review" onAction="#handleRateDelivery"
                    style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>

            <!-- Delivery Partner Actions -->
            <Button fx:id="acceptOrderBtn" text="Accept Order" onAction="#handleAcceptOrder"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="pickUpBtn" text="Mark as Picked Up" onAction="#handlePickUp"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="onTheWayBtn" text="On The Way" onAction="#handleOnTheWay"
                    style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="completeBtn" text="Mark as Delivered" onAction="#handleComplete"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>
            <Button fx:id="contactCustomerBtn" text="Contact Customer" onAction="#handleContactCustomer"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"
                    visible="false" managed="false"/>

            <!-- Common Actions -->
            <Button text="Close" onAction="#handleClose"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 5;"/>
        </HBox>

    </VBox>

</ScrollPane>

