<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.quickcommercedeliverysystemdesktop.controllers.dashboard.ProfileController"
      spacing="20" styleClass="content-area">

    <!-- Page Header -->
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Label text="ðŸ‘¤ My Profile" styleClass="page-title"/>
    </HBox>

    <Separator/>

    <ScrollPane fitToWidth="true" styleClass="scroll-pane">
        <VBox spacing="25" style="-fx-padding: 10;">

            <!-- Profile Image Section -->
            <VBox spacing="10" alignment="CENTER" styleClass="dashboard-card">
                <Label text="Profile Picture" styleClass="section-title"/>

                <StackPane>
                    <ImageView fx:id="profileImageView"
                               fitWidth="120" fitHeight="120"
                               preserveRatio="true"
                               style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 2);">
                        <viewport>
                            <Rectangle2D width="120" height="120"/>
                        </viewport>
                    </ImageView>
                </StackPane>

                <Button text="Choose Image" onAction="#handleChooseImage" styleClass="secondary-button"/>
                <Label fx:id="imageMessageLabel" styleClass="info-label"/>
            </VBox>

            <!-- Ratings Section (for delivery partners) -->
            <VBox fx:id="ratingsSection" spacing="10" alignment="CENTER" styleClass="dashboard-card"
                  style="-fx-padding: 20; -fx-background-color: linear-gradient(to bottom right, #f39c12, #f1c40f);" managed="false" visible="false">
                <Label text="â­ My Ratings" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;"/>

                <Label fx:id="ratingStarsLabel" text="â˜†â˜†â˜†â˜†â˜†"
                       style="-fx-font-size: 28px; -fx-text-fill: white;"/>

                <HBox spacing="10" alignment="CENTER">
                    <Label fx:id="averageRatingLabel" text="0.0"
                           style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <VBox alignment="CENTER_LEFT">
                        <Label text="Average" style="-fx-font-size: 12px; -fx-text-fill: white;"/>
                        <Label fx:id="totalRatingsLabel" text="0 ratings"
                               style="-fx-font-size: 12px; -fx-text-fill: white;"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Personal Information Section -->
            <VBox spacing="15" styleClass="dashboard-card">
                <Label text="Personal Information" styleClass="section-title"/>

                <GridPane hgap="15" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <Label text="Full Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="form-label"/>
                    <TextField fx:id="nameField" promptText="Enter your full name"
                               GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-input"/>

                    <Label text="Email:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="form-label"/>
                    <TextField fx:id="emailField" promptText="Enter your email"
                               GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-input"/>

                    <Label text="Phone:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="form-label"/>
                    <TextField fx:id="phoneField" promptText="Enter your phone number"
                               GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-input"/>
                </GridPane>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Update Profile" onAction="#handleUpdateProfile"
                            styleClass="primary-button"
                            style="-fx-background-color: linear-gradient(to bottom, #27ae60, #229954);"/>
                </HBox>

                <Label fx:id="profileMessageLabel" wrapText="true" styleClass="message-label"/>
            </VBox>

            <!-- Address Section -->
            <VBox spacing="15" styleClass="dashboard-card">
                <Label text="Default Address" styleClass="section-title"/>

                <TextArea fx:id="addressField" promptText="Enter your default delivery address"
                          wrapText="true" prefRowCount="3" styleClass="text-area"/>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Update Address" onAction="#handleUpdateAddress"
                            styleClass="primary-button"
                            style="-fx-background-color: linear-gradient(to bottom, #f39c12, #e67e22);"/>
                </HBox>

                <Label fx:id="addressMessageLabel" wrapText="true" styleClass="message-label"/>
            </VBox>

            <!-- Change Password Section -->
            <VBox spacing="15" styleClass="dashboard-card">
                <Label text="Change Password" styleClass="section-title"/>

                <GridPane hgap="15" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <Label text="Current Password:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="form-label"/>
                    <PasswordField fx:id="currentPasswordField" promptText="Enter current password"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-input"/>

                    <Label text="New Password:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="form-label"/>
                    <PasswordField fx:id="newPasswordField" promptText="Enter new password"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-input"/>

                    <Label text="Confirm Password:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="form-label"/>
                    <PasswordField fx:id="confirmPasswordField" promptText="Confirm new password"
                                   GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-input"/>
                </GridPane>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Change Password" onAction="#handleChangePassword"
                            styleClass="action-button-danger"/>
                </HBox>

                <Label fx:id="passwordMessageLabel" wrapText="true" styleClass="message-label"/>
            </VBox>

        </VBox>
    </ScrollPane>

</VBox>

